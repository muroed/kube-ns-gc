# üìã –°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## –ü—Ä–∏–Ω—Ü–∏–ø—ã

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** –º–µ–∂–¥—É Helm —á–∞—Ä—Ç–æ–º –∏ Docker –æ–±—Ä–∞–∑–æ–º:

- ‚úÖ **–í–µ—Ä—Å–∏—è Helm —á–∞—Ä—Ç–∞** = **–¢–µ–≥ Docker –æ–±—Ä–∞–∑–∞**
- ‚úÖ –ö–∞–∂–¥–æ–π –≤–µ—Ä—Å–∏–∏ —á–∞—Ä—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–≤–æ–π —Ç–µ–≥ –æ–±—Ä–∞–∑–∞
- ‚úÖ –í–µ—Ä—Å–∏—è —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ `deploy/kube-ns-gc/Chart.yaml`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ä—Å–∏–π

```
Chart.yaml:
‚îú‚îÄ‚îÄ version: 0.1.0      # –í–µ—Ä—Å–∏—è —á–∞—Ä—Ç–∞
‚îî‚îÄ‚îÄ appVersion: "0.1.0" # –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

Docker –æ–±—Ä–∞–∑:
‚îî‚îÄ‚îÄ ghcr.io/muroed/kube-ns-gc:0.1.0  # –¢–µ–≥ = –≤–µ—Ä—Å–∏—è —á–∞—Ä—Ç–∞
```

## –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞
./scripts/release.sh 1.0.0
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç –≤–µ—Ä—Å–∏–∏ (X.Y.Z)
2. –û–±–Ω–æ–≤–ª—è–µ—Ç Chart.yaml
3. –°–æ–∑–¥–∞–µ—Ç git —Ç–µ–≥
4. –ü—É—à–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –†—É—á–Ω–æ–π —Å–ø–æ—Å–æ–±

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é –≤ Chart.yaml
# 2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–≥
git tag -a v1.0.0 -m "Release v1.0.0"
git push origin v1.0.0
```

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ git —Ç–µ–≥–∞ `v*` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è workflow `release.yml`:

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
```yaml
- –û–±–Ω–æ–≤–ª—è–µ—Ç version –≤ Chart.yaml
- –û–±–Ω–æ–≤–ª—è–µ—Ç appVersion –≤ Chart.yaml
```

### 2. –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
```yaml
- –°–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑ —Å —Ç–µ–≥–æ–º –≤–µ—Ä—Å–∏–∏
- –°–æ–∑–¥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ç–µ–≥ latest
```

### 3. –£–ø–∞–∫–æ–≤–∫–∞ —á–∞—Ä—Ç–∞
```yaml
- –£–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç Helm —á–∞—Ä—Ç
- –°–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–µ–∫—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞
```yaml
- –°–æ–∑–¥–∞–µ—Ç GitHub Release
- –ü—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–π —á–∞—Ä—Ç
```

### 5. Security scan
```yaml
- –°–∫–∞–Ω–∏—Ä—É–µ—Ç –æ–±—Ä–∞–∑ –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Security tab
```

## –¢–µ–≥–∏ –æ–±—Ä–∞–∑–æ–≤

–î–ª—è –∫–∞–∂–¥–æ–π –≤–µ—Ä—Å–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ç–µ–≥–∏:

```bash
ghcr.io/muroed/kube-ns-gc:0.1.0           # –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–≥ –≤–µ—Ä—Å–∏–∏
ghcr.io/muroed/kube-ns-gc:0.1.0-abc1234   # –¢–µ–≥ —Å git sha
ghcr.io/muroed/kube-ns-gc:latest          # Latest —Ç–µ–≥ (—Ç–æ–ª—å–∫–æ –¥–ª—è main)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ Helm —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
helm repo add kube-ns-gc https://muroed.github.io/kube-ns-gc
helm repo update

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é
helm install kube-ns-gc kube-ns-gc/kube-ns-gc

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ä—Å–∏—é
helm install kube-ns-gc kube-ns-gc/kube-ns-gc --version 0.1.0
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ GitHub Releases

```bash
helm install kube-ns-gc https://github.com/muroed/kube-ns-gc/releases/download/v0.1.0/kube-ns-gc-0.1.0.tgz
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
helm upgrade kube-ns-gc kube-ns-gc/kube-ns-gc

# –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
helm upgrade kube-ns-gc kube-ns-gc/kube-ns-gc --version 0.2.0
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –í–µ—Ä—Å–∏—è —á–∞—Ä—Ç–∞ –≤—Å–µ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–µ—Ä—Å–∏–∏ –æ–±—Ä–∞–∑–∞
2. **–¢—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å, –∫–∞–∫–æ–π –æ–±—Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞–∫–æ–º —Ä–µ–ª–∏–∑–µ
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç security scan
4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ú–∏–Ω–∏–º—É–º —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–µ–ª–∏–∑–æ–≤
5. **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –≤–µ—Ä—Å–∏–π

## –ü—Ä–∏–º–µ—Ä—ã –≤–µ—Ä—Å–∏–π

```bash
# Patch –≤–µ—Ä—Å–∏—è (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
./scripts/release.sh 1.0.1

# Minor –≤–µ—Ä—Å–∏—è (–Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
./scripts/release.sh 1.1.0

# Major –≤–µ—Ä—Å–∏—è (breaking changes)
./scripts/release.sh 2.0.0
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞ –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:

1. **GitHub Actions**: https://github.com/muroed/kube-ns-gc/actions
2. **Releases**: https://github.com/muroed/kube-ns-gc/releases
3. **Packages**: https://github.com/muroed/kube-ns-gc/pkgs/container/kube-ns-gc
4. **Security**: https://github.com/muroed/kube-ns-gc/security
